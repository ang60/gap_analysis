(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{532:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:c?24*Number(n)/Number(a):n,className:l("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{className:c,...i}=r;return(0,s.createElement)(n,{ref:o,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...i})});return r.displayName=a(e),r}},2987:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3979:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),a=r(2115),l=r(2619),o=r.n(l),n=r(7910),c=r(6132),i=r(532),d=r(7828),u=r(2987),h=r(7246);function m(){let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)({email:"",password:""}),{login:m,isLoading:g,error:x,clearError:f}=(0,h.A)(),p=async e=>{e.preventDefault(),f();try{await m(r)}catch(e){console.error("Login failed:",e)}},y=e=>{l({...r,[e.target.name]:e.target.value})};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-8 w-8 text-white"})})}),(0,s.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome back"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your GapAnalysis Pro account"})]}),x&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2",children:[(0,s.jsx)(c.A,{className:"h-5 w-5 text-red-500"}),(0,s.jsx)("p",{className:"text-sm text-red-700",children:x})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r.email,onChange:y,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("input",{id:"password",name:"password",type:e?"text":"password",autoComplete:"current-password",required:!0,value:r.password,onChange:y,className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,s.jsx)(i.A,{className:"h-5 w-5 text-gray-400"}):(0,s.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(o(),{href:"/auth/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-blue-500 group-hover:text-blue-400"})}),g?"Signing in...":"Sign in"]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(o(),{href:"/auth/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})})]}),(0,s.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials"}),(0,s.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Admin:"})," admin@bank.co.ke / AdminPass123"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Manager:"})," manager@bank.co.ke / ManagerPass123"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Officer:"})," officer@bank.co.ke / OfficerPass123"]})]})]})]})})}},6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7246:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>h,A:()=>u});var s=r(5155),a=r(2115),l=r(5125),o=r(5704);let n=l.A.create({baseURL:o.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:t}=(await l.A.post("".concat(o.env.NEXT_PUBLIC_API_URL||"http://localhost:3000","/auth/refresh"),{refreshToken:e},{withCredentials:!0})).data;return localStorage.setItem("accessToken",t),r.headers.Authorization="Bearer ".concat(t),n(r)}}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login"}}return Promise.reject(e)});let c={async login(e){var t,r;let s=await n.post("/auth/login",e),a=s.data.accessToken||(null==(t=document.cookie.split("; ").find(e=>e.startsWith("accessToken=")))?void 0:t.split("=")[1]),l=s.data.refreshToken||(null==(r=document.cookie.split("; ").find(e=>e.startsWith("refreshToken=")))?void 0:r.split("=")[1]);return a&&localStorage.setItem("accessToken",a),l&&localStorage.setItem("refreshToken",l),{user:s.data.user,accessToken:a||"",refreshToken:l||""}},async register(e){var t,r;let s=await n.post("/users",e),a=s.data.accessToken||(null==(t=document.cookie.split("; ").find(e=>e.startsWith("accessToken=")))?void 0:t.split("=")[1]),l=s.data.refreshToken||(null==(r=document.cookie.split("; ").find(e=>e.startsWith("refreshToken=")))?void 0:r.split("=")[1]);return a&&localStorage.setItem("accessToken",a),l&&localStorage.setItem("refreshToken",l),{user:s.data.user,accessToken:a||"",refreshToken:l||""}},async logout(){try{await n.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},getCurrentUser:async()=>(await n.get("/auth/me")).data,async refreshToken(){let e=localStorage.getItem("refreshToken");if(!e)throw Error("No refresh token available");let{accessToken:t}=(await n.post("/auth/refresh",{refreshToken:e})).data;return localStorage.setItem("accessToken",t),{accessToken:t}},isAuthenticated:()=>!!localStorage.getItem("accessToken"),getAccessToken:()=>localStorage.getItem("accessToken"),getRefreshToken:()=>localStorage.getItem("refreshToken")};var i=r(63);let d=(0,a.createContext)(void 0),u=()=>{let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},h=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[o,n]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),m=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{if(c.isAuthenticated()){let e=await c.getCurrentUser();l(e)}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{n(!1)}})()},[]);let g=async e=>{try{n(!0),h(null);let t=await c.login(e);l(t.user),m.push("/dashboard")}catch(e){var t,r;throw h((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Login failed. Please try again."),e}finally{n(!1)}},x=async e=>{try{n(!0),h(null);let t=await c.register(e);l(t.user),m.push("/dashboard")}catch(e){var t,r;throw h((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Registration failed. Please try again."),e}finally{n(!1)}},f=async()=>{try{await c.logout()}catch(e){console.error("Logout error:",e)}finally{l(null),m.push("/auth/login")}};return(0,s.jsx)(d.Provider,{value:{user:r,isLoading:o,isAuthenticated:!!r,login:g,register:x,logout:f,error:u,clearError:()=>{h(null)}},children:t})}},7828:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7910:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},9686:(e,t,r)=>{Promise.resolve().then(r.bind(r,3979))}},e=>{e.O(0,[619,977,441,255,358],()=>e(e.s=9686)),_N_E=e.O()}]);