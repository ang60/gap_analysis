(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{1169:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1873:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(1847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3664:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},6651:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7812:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var r=a(5155);a(2115);var l=a(2467),t=a(3101),i=a(5016);let c=(0,t.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,asChild:t=!1,...n}=e,d=t?l.DX:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(c({variant:a}),s),...n})}},7910:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(1847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8125:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var r=a(5155),l=a(2115),t=a(3209),i=a(7003),c=a(7812),n=a(6170),d=a(7507),x=a(7910),o=a(1169);let m=(0,a(1847).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var h=a(6651),u=a(3664),g=a(1873),j=a(1010),v=a(7294),N=a(8596),b=a(7621);let y=[{value:"ADMIN",label:"Admin",color:"bg-red-100 text-red-800"},{value:"MANAGER",label:"Manager",color:"bg-blue-100 text-blue-800"},{value:"COMPLIANCE_OFFICER",label:"Compliance Officer",color:"bg-green-100 text-green-800"},{value:"STAFF",label:"Staff",color:"bg-gray-100 text-gray-800"}];function f(){let{user:e}=(0,v.A)(),[s,a]=(0,l.useState)([]),[f,p]=(0,l.useState)(!0),[A,w]=(0,l.useState)(""),[C,k]=(0,l.useState)("all"),[M,F]=(0,l.useState)(null),[E,S]=(0,l.useState)(""),[I,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{O()},[]);let O=async()=>{try{p(!0);let s=await b.A.get("/users/organization/".concat(null==e?void 0:e.organizationId));a(s.data)}catch(e){console.error("Failed to fetch users:",e)}finally{p(!1)}},L=async(e,r)=>{try{R(!0),await b.A.put("/users/".concat(e,"/assign-role"),{role:r}),a(s.map(s=>s.id===e?{...s,role:r}:s)),F(null),S("")}catch(e){console.error("Failed to update user role:",e),alert("Failed to update user role. Please try again.")}finally{R(!1)}},z=s.filter(e=>{let s=e.firstName.toLowerCase().includes(A.toLowerCase())||e.lastName.toLowerCase().includes(A.toLowerCase())||e.email.toLowerCase().includes(A.toLowerCase()),a="all"===C||e.role===C;return s&&a});return f?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading users..."})]})})}):(0,r.jsx)(N.ww,{fallback:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Only administrators can access user management."})]})}),children:(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage users and assign roles in your organization"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[s.length," users"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(t.Zp,{children:(0,r.jsx)(t.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,r.jsx)(x.A,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:s.filter(e=>"ADMIN"===e.role).length})]})]})})}),(0,r.jsx)(t.Zp,{children:(0,r.jsx)(t.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(m,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Managers"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:s.filter(e=>"MANAGER"===e.role).length})]})]})})}),(0,r.jsx)(t.Zp,{children:(0,r.jsx)(t.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Compliance Officers"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:s.filter(e=>"COMPLIANCE_OFFICER"===e.role).length})]})]})})}),(0,r.jsx)(t.Zp,{children:(0,r.jsx)(t.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,r.jsx)(o.A,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Staff"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:s.filter(e=>"STAFF"===e.role).length})]})]})})})]}),(0,r.jsx)(t.Zp,{children:(0,r.jsx)(t.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)(n.p,{placeholder:"Search users by name or email...",value:A,onChange:e=>w(e.target.value),className:"pl-10"})]})}),(0,r.jsx)("div",{className:"sm:w-48",children:(0,r.jsxs)(d.l6,{value:C,onValueChange:k,children:[(0,r.jsx)(d.bq,{className:"bg-white text-gray-900 border-gray-300",children:(0,r.jsx)(d.yv,{placeholder:"Filter by role"})}),(0,r.jsxs)(d.gC,{className:"bg-white border border-gray-300",children:[(0,r.jsx)(d.eb,{value:"all",className:"text-gray-900 hover:bg-gray-100",children:"All Roles"}),y.map(e=>(0,r.jsx)(d.eb,{value:e.value,className:"text-gray-900 hover:bg-gray-100",children:e.label},e.value))]})]})})]})})}),(0,r.jsxs)(t.Zp,{children:[(0,r.jsxs)(t.aR,{children:[(0,r.jsxs)(t.ZB,{children:["Users (",z.length,")"]}),(0,r.jsx)(t.BT,{children:"Manage user roles and permissions in your organization"})]}),(0,r.jsx)(t.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[z.map(s=>{var a;let l,t=(l=s.role,y.find(e=>e.value===l)||y[3]),n=s.id===(null==e?void 0:e.id);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:[s.firstName[0],s.lastName[0]]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("h3",{className:"font-medium text-gray-900",children:[s.firstName," ",s.lastName,n&&(0,r.jsx)("span",{className:"ml-2 text-xs text-blue-600 font-normal",children:"(You)"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:s.email})]}),s.branch&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:s.branch.name})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(c.E,{className:t.color,children:{ADMIN:"Support & Coordination",MANAGER:"Direction & Decision-making",COMPLIANCE_OFFICER:"Oversight & Regulatory Assurance",STAFF:"Input & Implementation"}[a=s.role]||a}),!n&&(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(null==M?void 0:M.id)===s.id?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(d.l6,{value:E,onValueChange:S,children:[(0,r.jsx)(d.bq,{className:"w-48 bg-white text-gray-900 border-gray-300",children:(0,r.jsx)(d.yv,{placeholder:"Select role"})}),(0,r.jsx)(d.gC,{className:"bg-white border border-gray-300",children:y.map(e=>(0,r.jsx)(d.eb,{value:e.value,className:"text-gray-900 hover:bg-gray-100",children:e.label},e.value))})]}),(0,r.jsx)(i.$,{size:"sm",onClick:()=>L(s.id,E),disabled:I||!E,className:"bg-blue-600 text-white hover:bg-blue-700",children:I?"Updating...":"Save"}),(0,r.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>{F(null),S("")},className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"})]}):(0,r.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>{F(s),S(s.role)},className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Change Role"]})})]})]},s.id)}),0===z.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(o.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,r.jsx)("p",{className:"text-gray-600",children:A||"all"!==C?"Try adjusting your search or filter criteria.":"No users have been added to this organization yet."})]})]})})]})]})})}},8596:(e,s,a)=>{"use strict";a.d(s,{CJ:()=>c,LS:()=>t,k6:()=>n,ww:()=>i});var r=a(5155),l=a(7294);function t(e){let{children:s,allowedRoles:a,fallback:t=null}=e,{user:i}=(0,l.A)();return i&&a.includes(i.role)?(0,r.jsx)(r.Fragment,{children:s}):(0,r.jsx)(r.Fragment,{children:t})}function i(e){let{children:s,fallback:a}=e;return(0,r.jsx)(t,{allowedRoles:["ADMIN"],fallback:a,children:s})}function c(e){let{children:s,fallback:a}=e;return(0,r.jsx)(t,{allowedRoles:["COMPLIANCE_OFFICER"],fallback:a,children:s})}function n(e){let{children:s,fallback:a}=e;return(0,r.jsx)(t,{allowedRoles:["ADMIN","MANAGER"],fallback:a,children:s})}},9281:(e,s,a)=>{Promise.resolve().then(a.bind(a,8125))}},e=>{e.O(0,[977,779,206,562,441,255,358],()=>e(e.s=9281)),_N_E=e.O()}]);