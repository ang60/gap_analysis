exports.id=879,exports.ids=[879],exports.modules={15514:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g,metadata:()=>f});var d=c(75338);c(82704);var e=c(87429);let f={title:"Gap Analysis System - Kenyan Banking Compliance Platform",description:"Comprehensive compliance & risk management platform for Kenyan banking sector. ISO 27001:2022 compliance, CBK guidelines, and automated gap analysis."};function g({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:"antialiased",children:(0,d.jsx)(e.AuthProvider,{children:a})})})}},19217:(a,b,c)=>{"use strict";c.d(b,{$:()=>i});var d=c(21124);c(38301);var e=c(96425),f=c(26691),g=c(15514);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{variants:{variant:{default:"bg-blue-600 text-white shadow-sm hover:bg-blue-700",destructive:"bg-red-600 text-white shadow-sm hover:bg-red-700 focus-visible:ring-red-500",outline:"border border-gray-300 bg-white text-gray-900 shadow-sm hover:bg-gray-50 hover:text-gray-900",secondary:"bg-gray-100 text-gray-900 shadow-sm hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i({className:a,variant:b,size:c,asChild:f=!1,...i}){let j=f?e.DX:"button";return(0,d.jsx)(j,{"data-slot":"button",className:(0,g.cn)(h({variant:b,size:c,className:a})),...i})}},21817:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>t});var d=c(21124),e=c(38301),f=c(3991),g=c.n(f),h=c(42378),i=c(68324),j=c(47089),k=c(19710),l=c(6130),m=c(88285),n=c(47268),o=c(25156);let p=({children:a,requiredRole:b})=>{let{user:c,isLoading:f,isAuthenticated:g}=(0,o.A)(),i=(0,h.useRouter)();return((0,e.useEffect)(()=>{if(!f){if(!g)return void i.push("/auth/login");if(b&&c?.role!==b)return void i.push("/dashboard")}},[g,f,c,b,i]),f)?(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!g||b&&c?.role!==b?null:(0,d.jsx)(d.Fragment,{children:a})};var q=c(15514);let r=[{name:"Dashboard",href:"/dashboard",roles:["ADMIN","MANAGER","COMPLIANCE_OFFICER","STAFF"]},{name:"Requirements",href:"/dashboard/requirements",roles:["COMPLIANCE_OFFICER"]},{name:"Gap Analysis",href:"/dashboard/gap-analysis",roles:["COMPLIANCE_OFFICER"]},{name:"Action Plans",href:"/dashboard/action-plans",roles:["MANAGER","STAFF"]},{name:"Risk Register",href:"/dashboard/risks",roles:["COMPLIANCE_OFFICER"]},{name:"Schedules",href:"/dashboard/schedules",roles:["MANAGER","COMPLIANCE_OFFICER"]},{name:"Evidence",href:"/dashboard/evidence",roles:["STAFF"]},{name:"User Management",href:"/dashboard/user-management",roles:["ADMIN"]},{name:"System Administration",href:"/dashboard/super-admin",roles:["SUPER_ADMIN"]},{name:"Profile",href:"/dashboard/profile",roles:["ADMIN","MANAGER","COMPLIANCE_OFFICER","STAFF"]}];function s({className:a}){let{user:b}=(0,o.A)(),c=(0,h.usePathname)();if(!b)return null;let e=r.filter(a=>a.roles.includes(b.role));return(0,d.jsx)("nav",{className:(0,q.cn)("space-y-1",a),children:e.map(a=>{let b=c===a.href;return(0,d.jsxs)(g(),{href:a.href,className:(0,q.cn)("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",b?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a.icon&&(0,d.jsx)(a.icon,{className:(0,q.cn)("mr-3 h-5 w-5 flex-shrink-0",b?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),a.name]},a.name)})})}function t({children:a}){let[b,c]=(0,e.useState)(!1);(0,h.usePathname)();let{user:f,logout:q}=(0,o.A)(),r=async()=>{await q()};return(0,d.jsx)(p,{children:(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsxs)("div",{className:`fixed inset-0 z-50 lg:hidden ${b?"block":"hidden"}`,children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>c(!1)}),(0,d.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl",children:[(0,d.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(i.A,{className:"h-8 w-8 text-blue-600"}),(0,d.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"GapAnalysis Pro"})]}),(0,d.jsx)("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:(0,d.jsx)(j.A,{className:"h-6 w-6"})})]}),(0,d.jsx)("div",{className:"flex-1 px-4 py-4",children:(0,d.jsx)(s,{})})]})]}),(0,d.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,d.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,d.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(i.A,{className:"h-8 w-8 text-blue-600"}),(0,d.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"GapAnalysis Pro"})]})}),(0,d.jsx)("div",{className:"flex-1 px-4 py-4",children:(0,d.jsx)(s,{})}),(0,d.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,d.jsxs)("span",{className:"text-white text-sm font-medium",children:[f?.firstName?.[0],f?.lastName?.[0]]})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:[f?.firstName," ",f?.lastName]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 truncate",children:f?.role})]}),(0,d.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",title:"Logout",children:(0,d.jsx)(k.A,{className:"h-5 w-5"})})]})})]})}),(0,d.jsxs)("div",{className:"lg:pl-64",children:[(0,d.jsx)("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:()=>c(!0),className:"text-gray-400 hover:text-gray-600 lg:hidden",children:(0,d.jsx)(l.A,{className:"h-6 w-6"})}),(0,d.jsx)("div",{className:"ml-4 lg:ml-0",children:(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"})})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,d.jsxs)("button",{className:"relative p-2 text-gray-400 hover:text-gray-600",children:[(0,d.jsx)(n.A,{className:"h-6 w-6"}),(0,d.jsx)("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"})]}),(0,d.jsxs)(g(),{href:"/dashboard/profile",className:"flex items-center space-x-3 hover:bg-gray-50 rounded-lg p-2 -m-2 transition-colors",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,d.jsxs)("span",{className:"text-white text-sm font-medium",children:[f?.firstName?.[0],f?.lastName?.[0]]})}),(0,d.jsxs)("div",{className:"hidden sm:block",children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[f?.firstName," ",f?.lastName]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:f?.role})]})]})]})]})}),(0,d.jsx)("main",{className:"p-4 sm:p-6 lg:p-8",children:a})]})]})})}},25156:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>k,A:()=>j});var d=c(21124),e=c(38301),f=c(77243);let g={async login(a){let b=await f.A.post("/auth/login",a),c=b.data.accessToken,d=b.data.refreshToken;return c&&localStorage.setItem("accessToken",c),d&&localStorage.setItem("refreshToken",d),{user:b.data.user,accessToken:c||"",refreshToken:d||""}},async loginToOrganization(a){let b=await f.A.post("/auth/login/organization",a),c=b.data.accessToken,d=b.data.refreshToken;return c&&localStorage.setItem("accessToken",c),d&&localStorage.setItem("refreshToken",d),{user:b.data.user,accessToken:c||"",refreshToken:d||""}},async loginByDomain(a){let b=await f.A.post("/auth/login/domain",a),c=b.data.accessToken,d=b.data.refreshToken;return c&&localStorage.setItem("accessToken",c),d&&localStorage.setItem("refreshToken",d),{user:b.data.user,accessToken:c||"",refreshToken:d||""}},getOrganizations:async()=>(await f.A.get("/organizations")).data,getOrganizationByDomain:async a=>(await f.A.get(`/organizations/domain/${a}`)).data,async register(a){let b=await f.A.post("/auth/register",a),c=b.data.accessToken,d=b.data.refreshToken;return c&&localStorage.setItem("accessToken",c),d&&localStorage.setItem("refreshToken",d),{user:b.data.user,accessToken:c||"",refreshToken:d||""}},async logout(){try{await f.A.post("/auth/logout")}catch(a){a&&"object"==typeof a&&"response"in a&&a.response&&"object"==typeof a.response&&"status"in a.response&&404===a.response.status?console.log("Logout endpoint not available, proceeding with client-side logout"):console.error("Logout error:",a)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},getCurrentUser:async()=>(await f.A.get("/auth/me")).data,async refreshToken(){let a=localStorage.getItem("refreshToken");if(!a)throw Error("No refresh token available");let{accessToken:b}=(await f.A.post("/auth/refresh",{refreshToken:a})).data;return localStorage.setItem("accessToken",b),{accessToken:b}},isAuthenticated:()=>!!localStorage.getItem("accessToken"),getAccessToken:()=>localStorage.getItem("accessToken"),getRefreshToken:()=>localStorage.getItem("refreshToken")};var h=c(42378);let i=(0,e.createContext)(void 0),j=()=>{let a=(0,e.useContext)(i);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a},k=({children:a})=>{let[b,c]=(0,e.useState)(null),[f,j]=(0,e.useState)(!0),[k,l]=(0,e.useState)(null),m=(0,h.useRouter)();(0,e.useEffect)(()=>{(async()=>{try{if(g.isAuthenticated()){let a=await g.getCurrentUser();c(a),"SUPER_ADMIN"===a.role&&"/dashboard"===window.location.pathname&&m.push("/dashboard/super-admin")}}catch(a){console.error("Auth check failed:",a),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{j(!1)}})()},[m]);let n=async a=>{try{j(!0),l(null);let b=await g.login(a);c(b.user),"SUPER_ADMIN"===b.user.role?m.push("/dashboard/super-admin"):m.push("/dashboard")}catch(a){throw l(a.response?.data?.message||"Login failed. Please try again."),a}finally{j(!1)}},o=async a=>{try{j(!0),l(null);let b=await g.register(a);c(b.user),"SUPER_ADMIN"===b.user.role?m.push("/dashboard/super-admin"):m.push("/dashboard")}catch(a){throw l(a.response?.data?.message||"Registration failed. Please try again."),a}finally{j(!1)}},p=async()=>{try{await g.logout()}catch(a){console.error("Logout error:",a)}finally{c(null),m.push("/auth/login")}};return(0,d.jsx)(i.Provider,{value:{user:b,isLoading:f,isAuthenticated:!!b,login:n,register:o,logout:p,error:k,clearError:()=>{l(null)}},children:a})}},38076:(a,b,c)=>{Promise.resolve().then(c.bind(c,25156))},41553:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},45119:(a,b,c)=>{"use strict";c.d(b,{BT:()=>i,Wu:()=>j,ZB:()=>h,Zp:()=>f,aR:()=>g});var d=c(21124);c(38301);var e=c(15514);function f({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card",className:(0,e.cn)("bg-white text-gray-900 flex flex-col gap-6 rounded-xl border border-gray-200 py-6 shadow-sm",a),...b})}function g({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-header",className:(0,e.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...b})}function h({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-title",className:(0,e.cn)("leading-none font-semibold text-gray-900",a),...b})}function i({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-description",className:(0,e.cn)("text-gray-600 text-sm",a),...b})}function j({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"card-content",className:(0,e.cn)("px-6",a),...b})}},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},51281:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},51644:(a,b,c)=>{Promise.resolve().then(c.bind(c,87429))},68528:(a,b,c)=>{Promise.resolve().then(c.bind(c,69694))},69694:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/lord-charles/Code/work/gap_analysis/frontend/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/lord-charles/Code/work/gap_analysis/frontend/app/dashboard/layout.tsx","default")},77243:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(12989);let e=d.A.create({baseURL:"http://localhost:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}});e.interceptors.request.use(a=>a,a=>Promise.reject(a)),e.interceptors.response.use(a=>a,async a=>{let b=a.config;if(a.response?.status===401&&!b._retry){b._retry=!0;try{let a=localStorage.getItem("refreshToken");if(a){let{accessToken:c}=(await d.A.post("http://localhost:3000/auth/refresh",{refreshToken:a},{withCredentials:!0})).data;return localStorage.setItem("accessToken",c),b.headers.Authorization=`Bearer ${c}`,e(b)}}catch{}}return Promise.reject(a)});let f=e},78256:(a,b,c)=>{Promise.resolve().then(c.bind(c,21817))},82704:()=>{},87429:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>e});var d=c(97954);(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/lord-charles/Code/work/gap_analysis/frontend/contexts/AuthContext.tsx","useAuth");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/lord-charles/Code/work/gap_analysis/frontend/contexts/AuthContext.tsx","AuthProvider")}};